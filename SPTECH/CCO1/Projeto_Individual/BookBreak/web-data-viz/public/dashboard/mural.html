<!DOCTYPE html>
<html lang="pt-br">

<head>
    <link rel="shortcut icon" href="../assets/icon/icon_nav.png" type="image/x-icon">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BookBreak | Desafio Mensal</title>

    <link rel="stylesheet" href="../css/mural.css" />

    <script src="../js/sessao.js"></script>
    <script src="./../js/alerta.js"></script>

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
</head>

<body onload="validarSessao(), atualizarFeed()" style="background-color: #161618;">

    <div class="janela">


        <header class="container">
            <div class="logo">
                <div class="logo_txt">
                    <h3>Logado com: <span id="b_usuario">usuário</span></h3>
                </div>
            </div>

            <div style="display: flex;">
                <ul class="itensNaveBar">
                    <li> <a href="../explorar.html">Explorar</a></li>
                    <li>|</li>
                    <li> <a href="">Desafio Mensal</a></li>
                    <li>|</li>
                    <li> <a href="./dados.html">Relatório</a></li>
                    <li>|</li>
                    <li onclick="limparSessao()">Sair</li>
                </ul>
            </div>
        </header>

        <div class="conteudo">
            <div class="menuL">
                <div>
                    <h1>O Pequeno Princípe</h1>
                </div>
                <div class="filtro" id="capa_livro">
                    <img src="../assets/imgs/pequeno_principe.jpg" alt="">
                </div>

                <div class="filtro" style="display: none; color: #FFF;" id="lista">
                    <h3>Lista de Palavras:</h3>
                        <div style="text-align: center;">
                            <h4 id="QR1">Rosa</h4>
                            <h4 id="QR2">Raposa</h4>
                            <h4 id="QR3">Cativar</h4>
                            <h4 id="QR4">Aviao</h4>
                            <h4 id="QR5">Chapeu</h4>
                        </div>
                </div>

                <div class="cap" style="display: flex;" id="cap">
                    <h3>Capítulo:</h3>
                    <select name="" id="capitulo" onchange="atualizarFeed()">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                        <option value="20">20</option>
                        <option value="21">21</option>
                        <option value="22">22</option>
                        <option value="23">23</option>
                        <option value="24">24</option>
                        <option value="25">25</option>
                        <option value="26">26</option>
                        <option value="27">27</option>
                    </select>
                </div>

                <div class="filtro" style="margin-top: 0;">
                    <button id="bt_minigame" onclick="trocarGame()"> Desafie-se! </button>
                    <button id="bt_mural" onclick="trocarMural()" style="display: none;"> Mural </button>
                </div>
                
                <h5 style="width: 40%; margin-left: 30%; text-align: center; color: #FFF; display: none;" id="info_game">Ao encontrar uma palavra, clique na primeira e na última letra dela!</h5>

            </div>

            <div class="dash-right" id="mural_tela">
                <div>
                    <div class="titulo1">
                        <h1>Desafio Mensal</h1>
                        <h3>Participe de discussões com diversos usuários</h3>
                    </div>

                    <div class="div-form">
                        <h1>Poste um comentário</h1>

                        <form id="form_postagem" method="post" onsubmit="return publicar()">
                            <div class="Tinp">
                                <span>Título:</span>
                                <input name="titulo" id="titulo" maxlength="100" type="text">
                            </div>
                            <br>
                            <span>
                                Descrição:
                                <br>
                                <textarea name="descricao" id="textarea_descricao" maxlength="250" rows="5"
                                    placeholder="(máximo de 250 caracteres)"></textarea>
                            </span>
                            <br>
                            <br>
                            <button>Enviar</button>

                            <!-- <select name="" id="teste">
                                <option value="0">0</option>
                                <option value="1">1</option>
                            </select> -->

                        </form>
                    </div>

                    <div class="coments">
                        <h1>Comentários do Capítulo</h1>
                        <div class="div-results">
                            <div id="feed_container" class="feed-container">

                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <div id="game_tela" style="display: none;" class="dash-right">
                <div class="titulo1" style="margin-left: 10%; margin-bottom: 5%; height: auto; width: 68%;">
                    <h1 style="text-align: center; color: #3A2C23; font-family: linden-hill; font-weight: 100;" id="msg_ccplv">
                        Caça-Palavras
                    </h1>
                </div>
                <div id="div_game"></div>
    
            </div>

        </div>


    </div>




</body>

</html>

<script>

    b_usuario.innerHTML = sessionStorage.NOME_USUARIO;
    // b_cpf.innerHTML = sessionStorage.CPF_USUARIO;
    var tamanho;

    atualizarFeed()

    function limparFormulario() {
        document.getElementById("form_postagem").reset();
    }

    function publicar() {

        var idCap = capitulo.value;

        fetch(`/avisos/listar/${idCap}`).then(function (resposta) {
            if (resposta.ok) {
                if (resposta.status == 204) {
                }
                resposta.json().then(function (resposta) {
                    console.log("Dados recebidos: ", JSON.stringify(resposta));
                    tamanho = resposta.length + 1;

                    // ==========================================

                    var idUsuario = sessionStorage.ID_USUARIO;
                    console.log(tamanho);

                    var corpo = {
                        titulo: form_postagem.titulo.value,
                        descricao: form_postagem.descricao.value,
                        capitulo: capitulo.value,
                        id: tamanho
                    }

                    console.log(corpo)

                    fetch(`/avisos/publicar/${idUsuario}`, {
                        method: "post",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify(corpo)
                    }).then(function (resposta) {

                        console.log("resposta: ", resposta);

                        if (resposta.ok) {
                            window.alert("Post realizado com sucesso pelo usuario de ID: " + idUsuario + "!");
                            atualizarFeed();
                            limparFormulario();
                            
                        } else if (resposta.status == 404) {
                            window.alert("Deu 404!");
                        } else {
                            throw ("Houve um erro ao tentar realizar a postagem! Código da resposta: " + resposta.status);
                        }
                    }).catch(function (resposta) {
                        console.log(`#ERRO: ${resposta}`);
                        finalizarAguardar();
                    });
                });
            } else {
                throw ('Houve um erro na API!');
            }

        }).catch(function (resposta) {
            console.error(resposta);
        });

        return false;

    }

    function editar(idPost) {
        sessionStorage.ID_POSTAGEM_EDITANDO = idPost;
        console.log("cliquei em editar - " + idPost);
        window.alert("Você será redirecionado à página de edição do aviso de id número: " + idPost);
        window.location = "/dashboard/edicao-aviso.html"

    }

    function deletar(id) {
        var idCap = capitulo.value;

        alert(id)

        // idDiv.style.display = 'none';

         console.log("Criar função de apagar post escolhido - ID" + id);
         fetch(`/avisos/deletar/${id}/${idCap}`, {
             method: "DELETE",
             headers: {
                 "Content-Type": "application/json"
             }
         }).then(function (resposta) {

             if (resposta.ok) {
                 window.alert("Post deletado com sucesso pelo usuario de email: " + sessionStorage.getItem("EMAIL_USUARIO") + "!");
                 window.location = "/dashboard/mural.html"
             } else if (resposta.status == 404) {
                 window.alert("Deu 404!");
             } else {
                 throw ("Houve um erro ao tentar realizar a postagem! Código da resposta: " + resposta.status);
             }
         }).catch(function (resposta) {
             console.log(`#ERRO: ${resposta}`);
         });

    }

    function atualizarFeed() {
        var idCap = capitulo.value;

        fetch(`/avisos/listar/${idCap}`).then(function (resposta) {
            if (resposta.ok) {
                if (resposta.status == 204) {
                    var feed = document.getElementById("feed_container");
                    var mensagem = document.createElement("span");
                    mensagem.innerHTML = "Nenhum resultado encontrado."
                    feed.appendChild(mensagem);
                    throw "Nenhum resultado encontrado!!";
                }

                resposta.json().then(function (resposta) {
                    console.log("Dados recebidos: ", JSON.stringify(resposta));

                    var feed = document.getElementById("feed_container");
                    feed.innerHTML = "";
                    for (let i = 0; i < resposta.length; i++) {
                        var publicacao = resposta[i];

                        // criando e manipulando elementos do HTML via JavaScript
                        var divPublicacao = document.createElement("div");
                        divPublicacao.id = i;
                        var spanID = document.createElement("span");
                        var spanTitulo = document.createElement("span");
                        var spanNome = document.createElement("span");
                        var divDescricao = document.createElement("div");
                        var divButtons = document.createElement("div");
                        var btnEditar = document.createElement("button");
                        var btnDeletar = document.createElement("button");

                        var divDados = document.createElement("div");

                        spanID.innerHTML = "Id: <span>" + publicacao.idPost + "</span>";
                        spanTitulo.innerHTML = "Título: <span>" + publicacao.titulo + "</span>";
                        spanNome.innerHTML = "Autor: <span>" + publicacao.nome + "</span>";
                        divDescricao.innerHTML = "<span> Descrição: " + publicacao.descricao + "</span>";
                        btnEditar.innerHTML = "Editar";
                        btnDeletar.innerHTML = "Deletar";

                        divPublicacao.className = "publicacao";
                        spanTitulo.id = "inputNumero" + publicacao.idPost;
                        spanNome.className = "publicacao-nome";
                        spanTitulo.className = "publicacao-titulo";
                        divDescricao.className = "publicacao-descricao";
                        spanID.className = "publicacao-id";

                        divDados.className = "publicacao-dados";
                        
                        
                        

                        divPublicacao.appendChild(divDados);
                        divDados.appendChild(spanID);
                        divDados.appendChild(spanNome);
                        divDados.appendChild(spanTitulo);
                        divPublicacao.appendChild(divDescricao);
                        feed.appendChild(divPublicacao);
                        
                         if(publicacao.nome == sessionStorage.NOME_USUARIO){
                             divButtons.className = "div-buttons"

                            //  btnEditar.className = "publicacao-btn-editar"
                            //  btnEditar.id = "btnEditar" + publicacao.idPost;
                            //  btnEditar.setAttribute("onclick", `editar(${publicacao.idPost})`);

                             btnDeletar.className = "publicacao-btn-editar"
                             btnDeletar.id = "btnDeletar" + publicacao.idPost;
                             btnDeletar.setAttribute("onclick", `deletar(${publicacao.idPost})`);

                             divPublicacao.appendChild(divButtons);
                            //  divButtons.appendChild(btnEditar);
                             divButtons.appendChild(btnDeletar);
                         }
                    }

                });
            } else {
                throw ('Houve um erro na API!');
            }
        }).catch(function (resposta) {
            console.error(resposta);

        });
    }

    function trocarGame() {
        mural_tela.style.display = 'none';
        cap.style.display = 'none'

        bt_minigame.style.marginTop = "10%"
        game_tela.style.display = 'block';

        div_game.style.borderColor = "#FFF"

        capa_livro.style.display = 'none'

        lista.style.display = 'block'
        
        preencher()

        bt_mural.style.display = 'block'
        bt_minigame.style.display = 'none'

        info_game.style.display = 'block'
        
    }

    function trocarMural() {
        mural_tela.style.display = 'flex';
        game_tela.style.display = 'none';

        cap.style.display = 'flex'
        lista.style.display = 'none'

        bt_minigame.style.marginTop = "0"

        div_game.style.borderColor = "#FFF"

        capa_livro.style.display = 'flex'

        bt_mural.style.display = 'none'
        bt_minigame.style.display = 'block'

        info_game.style.display = 'none'
        
    }

    // <================================= Caça Palavras =================================>

    const L1 = [];
    const BT = [];

    const palavras = {
        P1: ['R', 'O', 'S', 'A'],
        P2: ['R', 'A', 'P', 'O', 'S', 'A'],
        P3: ['C', 'A', 'T', 'I', 'V', 'A', 'R'],
        P4: ['A', 'V', 'I', 'A', 'O'],
        P5: ['C', 'H', 'A', 'P', 'E', 'U']

    }

    const tamanhoJg = 300;
    let Nclick = 0;

    var mensagem = ""

    function preencher(){

        div_game.innerHTML = ""

        for (let index = 1; index <= tamanhoJg; index++){
            ps1 = (Math.random() * 26 - 0.5).toFixed();

            if (ps1 == 0) {L1[index - 1] = 'A'} 
            if (ps1 == 1) {L1[index - 1] = 'B'} 
            if (ps1 == 2) {L1[index - 1] = 'C'} 
            if (ps1 == 3) {L1[index - 1] = 'D'} 
            if (ps1 == 4) {L1[index - 1] = 'E'}
            if (ps1 == 5) {L1[index - 1] = 'F'} 
            if (ps1 == 6) {L1[index - 1] = 'G'} 
            if (ps1 == 7) {L1[index - 1] = 'H'} 
            if (ps1 == 8) {L1[index - 1] = 'I'} 
            if (ps1 == 9) {L1[index - 1] = 'J'} 
            if (ps1 == 10) {L1[index - 1] = 'K'} 
            if (ps1 == 11) {L1[index - 1] = 'L'} 
            if (ps1 == 12) {L1[index - 1] = 'M'} 
            if (ps1 == 13) {L1[index - 1] = 'N'} 
            if (ps1 == 14) {L1[index - 1] = 'O'} 
            if (ps1 == 15) {L1[index - 1] = 'P'} 
            if (ps1 == 16) {L1[index - 1] = 'Q'} 
            if (ps1 == 17) {L1[index - 1] = 'R'} 
            if (ps1 == 18) {L1[index - 1] = 'S'} 
            if (ps1 == 19) {L1[index - 1] = 'T'} 
            if (ps1 == 20) {L1[index - 1] = 'U'} 
            if (ps1 == 21) {L1[index - 1] = 'V'} 
            if (ps1 == 22) {L1[index - 1] = 'W'} 
            if (ps1 == 23) {L1[index - 1] = 'X'} 
            if (ps1 == 24) {L1[index - 1] = 'Y'} 
            if (ps1 == 25) {L1[index - 1] = 'Z'} 
        }

        for (let index = 1; index <= tamanhoJg; index++) {
            div_game.innerHTML += `<button onclick="BT[${index - 1}] = 1; marcar()" id="bt${index - 1}" style="background-color: #00000000; border-color: #00000000; width: 5%; color: #3A2C23"> ${L1[index - 1]} </button>`

            if (index % 20 == 0){
                div_game.innerHTML += '<br>'
            }
            
        }

        cont = 0;
        repeticao = []
        r1 = []
        r2 = []
        r3 = []
        r4 = []
        r5 = []
        certas = 0

        ps1 = 0
        existe = 0;

        QR1.style.textDecoration = 'none'
        QR2.style.textDecoration = 'none'
        QR3.style.textDecoration = 'none'
        QR4.style.textDecoration = 'none'
        QR5.style.textDecoration = 'none'

        msg_ccplv.innerHTML = 'Caça-Palavras'

        posicionar()

    }

    let PP1 = 302
    let PP2 = 302

    function marcar(){
        Nclick += 1

        if (Nclick == 1){
            PP1 = BT.indexOf(1)
            BT[PP1] = 0

            document.getElementById(`bt${PP1}`).style.backgroundColor = '#5C4638'
            document.getElementById(`bt${PP1}`).style.borderRadius = '10px 10px 10px 10px'

        } else if (Nclick == 2){
            PP2 = BT.indexOf(1)
            BT[PP2] = 0

            if (r1[0] == PP1 && r1[1] == PP2){
                document.getElementById(`bt${PP1}`).style.backgroundColor = '#5C4638'
                document.getElementById(`bt${PP2}`).style.backgroundColor = '#5C4638'

                document.getElementById(`bt${PP1}`).disabled = true
                document.getElementById(`bt${PP2}`).disabled = true

                QR1.style.textDecoration = 'line-through';
                certas += 1;
            
                if(r1[1] - r1[0] == 3){
                    document.getElementById(`bt${PP1 + 1}`).style.backgroundColor = '#5C4638'
                    document.getElementById(`bt${PP1 + 2}`).style.backgroundColor = '#5C4638'

                    document.getElementById(`bt${PP1 + 1}`).disabled = true
                    document.getElementById(`bt${PP1 + 2}`).disabled = true

                    document.getElementById(`bt${PP1}`).style.borderRadius = '10px 0px 0px 10px'
                    document.getElementById(`bt${PP2}`).style.borderRadius = '0px 10px 10px 0px'
                } else if (r1[1] - r1[0] == 60) {
                    document.getElementById(`bt${PP1 + 20}`).style.backgroundColor = '#5C4638'
                    document.getElementById(`bt${PP1 + 40}`).style.backgroundColor = '#5C4638'

                    document.getElementById(`bt${PP1 + 20}`).disabled = true
                    document.getElementById(`bt${PP1 + 40}`).disabled = true

                    document.getElementById(`bt${PP1}`).style.borderRadius = '10px 10px 0px 0px'
                    document.getElementById(`bt${PP2}`).style.borderRadius = '0px 0px 10px 10px'

                }
            } else if (r2[0] == PP1 && r2[1] == PP2){
                document.getElementById(`bt${PP1}`).style.backgroundColor = '#5C4638'
                document.getElementById(`bt${PP2}`).style.backgroundColor = '#5C4638'

                document.getElementById(`bt${PP1}`).disabled = true
                document.getElementById(`bt${PP2}`).disabled = true

                QR2.style.textDecoration = 'line-through';
                certas += 1;

                if(r2[1] - r2[0] == 5){
                    document.getElementById(`bt${PP1 + 1}`).style.backgroundColor = '#5C4638'
                    document.getElementById(`bt${PP1 + 2}`).style.backgroundColor = '#5C4638'
                    document.getElementById(`bt${PP1 + 3}`).style.backgroundColor = '#5C4638'
                    document.getElementById(`bt${PP1 + 4}`).style.backgroundColor = '#5C4638'

                    document.getElementById(`bt${PP1 + 1}`).disabled = true
                    document.getElementById(`bt${PP1 + 2}`).disabled = true
                    document.getElementById(`bt${PP1 + 3}`).disabled = true
                    document.getElementById(`bt${PP1 + 4}`).disabled = true

                    document.getElementById(`bt${PP1}`).style.borderRadius = '10px 0px 0px 10px'
                    document.getElementById(`bt${PP2}`).style.borderRadius = '0px 10px 10px 0px'
                } else if (r2[1] - r2[0] == 100) {
                    document.getElementById(`bt${PP1 + 20}`).style.backgroundColor = '#5C4638'
                    document.getElementById(`bt${PP1 + 40}`).style.backgroundColor = '#5C4638'
                    document.getElementById(`bt${PP1 + 60}`).style.backgroundColor = '#5C4638'
                    document.getElementById(`bt${PP1 + 80}`).style.backgroundColor = '#5C4638'

                    document.getElementById(`bt${PP1 + 20}`).disabled = true
                    document.getElementById(`bt${PP1 + 40}`).disabled = true
                    document.getElementById(`bt${PP1 + 60}`).disabled = true
                    document.getElementById(`bt${PP1 + 80}`).disabled = true

                    document.getElementById(`bt${PP1}`).style.borderRadius = '10px 10px 0px 0px'
                    document.getElementById(`bt${PP2}`).style.borderRadius = '0px 0px 10px 10px'
                }
            } else if (r3[0] == PP1 && r3[1] == PP2){
                document.getElementById(`bt${PP1}`).style.backgroundColor = '#5C4638'
                document.getElementById(`bt${PP2}`).style.backgroundColor = '#5C4638'

                document.getElementById(`bt${PP1}`).disabled = true
                document.getElementById(`bt${PP2}`).disabled = true

                QR3.style.textDecoration = 'line-through';
                certas += 1;

                if(r3[1] - r3[0] == 6){
                    document.getElementById(`bt${PP1 + 1}`).style.backgroundColor = '#5C4638'
                    document.getElementById(`bt${PP1 + 2}`).style.backgroundColor = '#5C4638'
                    document.getElementById(`bt${PP1 + 3}`).style.backgroundColor = '#5C4638'
                    document.getElementById(`bt${PP1 + 4}`).style.backgroundColor = '#5C4638'
                    document.getElementById(`bt${PP1 + 5}`).style.backgroundColor = '#5C4638'

                    document.getElementById(`bt${PP1 + 1}`).disabled = true
                    document.getElementById(`bt${PP1 + 2}`).disabled = true
                    document.getElementById(`bt${PP1 + 3}`).disabled = true
                    document.getElementById(`bt${PP1 + 4}`).disabled = true
                    document.getElementById(`bt${PP1 + 5}`).disabled = true

                    document.getElementById(`bt${PP1}`).style.borderRadius = '10px 0px 0px 10px'
                    document.getElementById(`bt${PP2}`).style.borderRadius = '0px 10px 10px 0px'
                } else if (r3[1] - r3[0] == 120) {
                    document.getElementById(`bt${PP1 + 20}`).style.backgroundColor = '#5C4638'
                    document.getElementById(`bt${PP1 + 40}`).style.backgroundColor = '#5C4638'
                    document.getElementById(`bt${PP1 + 60}`).style.backgroundColor = '#5C4638'
                    document.getElementById(`bt${PP1 + 80}`).style.backgroundColor = '#5C4638'
                    document.getElementById(`bt${PP1 + 100}`).style.backgroundColor = '#5C4638'

                    document.getElementById(`bt${PP1 + 20}`).disabled = true
                    document.getElementById(`bt${PP1 + 40}`).disabled = true
                    document.getElementById(`bt${PP1 + 60}`).disabled = true
                    document.getElementById(`bt${PP1 + 80}`).disabled = true
                    document.getElementById(`bt${PP1 + 100}`).disabled = true

                    document.getElementById(`bt${PP1}`).style.borderRadius = '10px 10px 0px 0px'
                    document.getElementById(`bt${PP2}`).style.borderRadius = '0px 0px 10px 10px'
                }
            } else if (r4[0] == PP1 && r4[1] == PP2){
                document.getElementById(`bt${PP1}`).style.backgroundColor = '#5C4638'
                document.getElementById(`bt${PP2}`).style.backgroundColor = '#5C4638'

                document.getElementById(`bt${PP1}`).disabled = true
                document.getElementById(`bt${PP2}`).disabled = true

                QR4.style.textDecoration = 'line-through';
                certas += 1;

                if(r4[1] - r4[0] == 4){
                    document.getElementById(`bt${PP1 + 1}`).style.backgroundColor = '#5C4638'
                    document.getElementById(`bt${PP1 + 2}`).style.backgroundColor = '#5C4638'
                    document.getElementById(`bt${PP1 + 3}`).style.backgroundColor = '#5C4638'

                    document.getElementById(`bt${PP1 + 1}`).disabled = true
                    document.getElementById(`bt${PP1 + 2}`).disabled = true
                    document.getElementById(`bt${PP1 + 3}`).disabled = true

                    document.getElementById(`bt${PP1}`).style.borderRadius = '10px 0px 0px 10px'
                    document.getElementById(`bt${PP2}`).style.borderRadius = '0px 10px 10px 0px'
                } else if (r4[1] - r4[0] == 80) {
                    document.getElementById(`bt${PP1 + 20}`).style.backgroundColor = '#5C4638'
                    document.getElementById(`bt${PP1 + 40}`).style.backgroundColor = '#5C4638'
                    document.getElementById(`bt${PP1 + 60}`).style.backgroundColor = '#5C4638'

                    document.getElementById(`bt${PP1 + 20}`).disabled = true
                    document.getElementById(`bt${PP1 + 40}`).disabled = true
                    document.getElementById(`bt${PP1 + 60}`).disabled = true

                    document.getElementById(`bt${PP1}`).style.borderRadius = '10px 10px 0px 0px'
                    document.getElementById(`bt${PP2}`).style.borderRadius = '0px 0px 10px 10px'
                }
            } else if (r5[0] == PP1 && r5[1] == PP2){
                document.getElementById(`bt${PP1}`).style.backgroundColor = '#5C4638'
                document.getElementById(`bt${PP2}`).style.backgroundColor = '#5C4638'

                document.getElementById(`bt${PP1}`).disabled = true
                document.getElementById(`bt${PP2}`).disabled = true

                QR5.style.textDecoration = 'line-through';
                certas += 1;

                if(r5[1] - r5[0] == 5){
                    document.getElementById(`bt${PP1 + 1}`).style.backgroundColor = '#5C4638'
                    document.getElementById(`bt${PP1 + 2}`).style.backgroundColor = '#5C4638'
                    document.getElementById(`bt${PP1 + 3}`).style.backgroundColor = '#5C4638'
                    document.getElementById(`bt${PP1 + 4}`).style.backgroundColor = '#5C4638'

                    document.getElementById(`bt${PP1 + 1}`).disabled = true
                    document.getElementById(`bt${PP1 + 2}`).disabled = true
                    document.getElementById(`bt${PP1 + 3}`).disabled = true
                    document.getElementById(`bt${PP1 + 4}`).disabled = true

                    document.getElementById(`bt${PP1}`).style.borderRadius = '10px 0px 0px 10px'
                    document.getElementById(`bt${PP2}`).style.borderRadius = '0px 10px 10px 0px'
                } else if (r5[1] - r5[0] == 100) {
                    document.getElementById(`bt${PP1 + 20}`).style.backgroundColor = '#5C4638'
                    document.getElementById(`bt${PP1 + 40}`).style.backgroundColor = '#5C4638'
                    document.getElementById(`bt${PP1 + 60}`).style.backgroundColor = '#5C4638'
                    document.getElementById(`bt${PP1 + 80}`).style.backgroundColor = '#5C4638'

                    document.getElementById(`bt${PP1 + 20}`).disabled = true
                    document.getElementById(`bt${PP1 + 40}`).disabled = true
                    document.getElementById(`bt${PP1 + 60}`).disabled = true
                    document.getElementById(`bt${PP1 + 80}`).disabled = true

                    document.getElementById(`bt${PP1}`).style.borderRadius = '10px 10px 0px 0px'
                    document.getElementById(`bt${PP2}`).style.borderRadius = '0px 0px 10px 10px'
                }
            } else {
                document.getElementById(`bt${PP1}`).style.backgroundColor = '#BEBEBE'
                document.getElementById(`bt${PP1}`).style.borderRadius = '0px 0px 0px 0px'

            }

            if(certas == 5){
                msg_ccplv.innerHTML = 'Parabéns! Caça-Palavras completo!'

                for (let index = 1; index <= tamanhoJg; index++) {

                    id = `bt${index - 1}`
                    document.getElementById(id).disabled = true
            
                }
            }

            Nclick = 0
        }
    }

    let cont = 1;
    let respT;
    let lc;
    let repeticao = []

    var certas = 0;

    let r1 = []
    let r2 = []
    let r3 = []
    let r4 = []
    let r5 = []

    let ps1 = 0
    let existe = 0;

    function posicionar(){
        if (cont == 1){
            respT = 4
        } else if (cont == 2){
            respT = 6
        } else if (cont == 3){
            respT = 7
        }  else if (cont == 4){
            respT = 5
        } else if (cont == 5){
            respT = 6
        }

        lc = (Math.random()).toFixed();
        aleat = (Math.random() * tamanhoJg).toFixed();

        ps1 = Number(aleat)

        if (lc == 1){
            if  (ps1 > (20 - respT) && ps1 <= 20 
                || ps1 > (40 - respT) && ps1 <= 40 
                || ps1 > (60 - respT) && ps1 <= 60 
                || ps1 > (80 - respT) && ps1 <= 80
                || ps1 > (100 - respT) && ps1 <= 100
                || ps1 > (120 - respT) && ps1 <= 120
                || ps1 > (140 - respT) && ps1 <= 140
                || ps1 > (160 - respT) && ps1 <= 160
                || ps1 > (180 - respT) && ps1 <= 180
                || ps1 > (200 - respT) && ps1 <= 200
                || ps1 > (220 - respT) && ps1 <= 220
                || ps1 > (240 - respT) && ps1 <= 240
                || ps1 > (260 - respT) && ps1 <= 260
                || ps1 > (280 - respT) && ps1 <= 280
                || ps1 > (300 - respT) && ps1 <= 300){
                posicionar()

            } else {
                for (index = 0; index < repeticao.length; index++){
                    for(index2 = 0; index2 < respT; index2++){
                        if (repeticao[index] == (ps1 + (index2 - 1))) { existe = 1 }
                    }
                }

                if (existe == 0){
                    for (index = 0; index < respT; index++){
                        if (cont == 1) document.getElementById(`bt${Number(ps1) + (index - 1)}`).innerHTML = palavras.P1[index]
                        if (cont == 2) document.getElementById(`bt${Number(ps1) + (index - 1)}`).innerHTML = palavras.P2[index]
                        if (cont == 3) document.getElementById(`bt${Number(ps1) + (index - 1)}`).innerHTML = palavras.P3[index]
                        if (cont == 4) document.getElementById(`bt${Number(ps1) + (index - 1)}`).innerHTML = palavras.P4[index]
                        if (cont == 5) document.getElementById(`bt${Number(ps1) + (index - 1)}`).innerHTML = palavras.P5[index]

                        repeticao.push((Number(ps1) + (index - 1)))
                        

                        // document.getElementById(`bt${Number(ps1) + (index - 1)}`).style.backgroundColor = 'gray'
                    }
                        if (cont == 1){
                            r1.push(ps1 - 1)
                            r1.push(ps1 + (respT - 1) - 1)
                        } else if (cont == 2){
                            r2.push(ps1 - 1)
                            r2.push(ps1 + (respT - 1) - 1)
                        } else if (cont == 3){
                            r3.push(ps1 - 1)
                            r3.push(ps1 + (respT - 1) - 1)
                        } else if (cont == 4){
                            r4.push(ps1 - 1)
                            r4.push(ps1 + (respT - 1) - 1)
                        } else if (cont == 5){
                            r5.push(ps1 - 1)
                            r5.push(ps1 + (respT - 1) - 1)
                        } 

                    cont++

                    if (cont > 5){} 
                    else {
                        posicionar()
                    }
                } else {
                    existe = 0
                    posicionar()
                }

            }
        } else {
            if(ps1 > (300 - (respT * 20))){
                posicionar()
            } else {

                
                for (index = 0; index < repeticao.length; index++){
                    for (index2 = 0; index2 < respT; index2++){
                        if (repeticao[index] == (ps1 + ((index2 * 20) - 1))) { existe = 1 }
                    }
                }

                if (existe == 0){
                    for (index = 0; index < respT; index++){
                        if (cont == 1) document.getElementById(`bt${Number(ps1) + ((index * 20) - 1)}`).innerHTML = palavras.P1[index]
                        if (cont == 2) document.getElementById(`bt${Number(ps1) + ((index * 20) - 1)}`).innerHTML = palavras.P2[index]
                        if (cont == 3) document.getElementById(`bt${Number(ps1) + ((index * 20) - 1)}`).innerHTML = palavras.P3[index]
                        if (cont == 4) document.getElementById(`bt${Number(ps1) + ((index * 20) - 1)}`).innerHTML = palavras.P4[index]
                        if (cont == 5) document.getElementById(`bt${Number(ps1) + ((index * 20) - 1)}`).innerHTML = palavras.P5[index]

                        repeticao.push((Number(ps1) + ((index * 20) - 1)))

                        // document.getElementById(`bt${Number(ps1) + ((index * 20) - 1)}`).style.backgroundColor = 'gray'
                    }
                    if (cont == 1){
                            r1.push(ps1 - 1)
                            r1.push(ps1 + ((respT - 1) * 20) - 1)
                        } else if (cont == 2){
                            r2.push(ps1 - 1)
                            r2.push(ps1 + ((respT - 1) * 20) - 1)
                        } else if (cont == 3){
                            r3.push(ps1 - 1)
                            r3.push(ps1 + ((respT - 1) * 20) - 1)
                        } else if (cont == 4){
                            r4.push(ps1 - 1)
                            r4.push(ps1 + ((respT - 1) * 20) - 1)
                        } else if (cont == 5){
                            r5.push(ps1 - 1)
                            r5.push(ps1 + ((respT - 1) * 20) - 1)
                        } 

                    cont++

                    if (cont > 5){} 
                    else {
                        posicionar()
                    }
                } else {
                    existe = 0
                    posicionar()
                }

            }
        }
    }

</script>